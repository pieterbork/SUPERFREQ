{% extends "base.html" %}

{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<div class="content">
	<div class="scan_button_copy_container">
		<input type="submit" value="Scan" class="scan_button_copy">
	</div>
	<div id="outer_ring_container" class="outer_ring_container">
		<div class="ring_container">
			<div id="r1" class="ring"></div>
			<div id="r2" class="ring"></div>
		</div>
	</div>
	<div class="status_container">
		<div id="status" class="status">
			<span id="scan_status" class="status_text">
				Starting Scan...
			</span>
		</div>
	</div>
	<div class="results_link_container">
		<a href="/results" id="results_link" class="results_link"><h2>See Results &gt;</h2></a>
	</div>
</div>
<script type="text/javascript" charset="utf-8">
	var socket;
	$(document).ready(function() {
		socket = io.connect("http://" + document.domain + ":" + location.port);
		socket.on('update', function(data) {
			if (data.msg == "Done") {
				$('#scan_status')[0].innerHTML = "<h2>Done</h2>";
				$('#results_link')[0].style.display = "block";
				$('#outer_ring_container')[0].style.opacity = 0;
				$('#status')[0].style.background = "#55bb55";
			} else {
				$('#scan_status')[0].innerHTML = data.msg;
			}
		});
	});
</script>
{% endblock %}
