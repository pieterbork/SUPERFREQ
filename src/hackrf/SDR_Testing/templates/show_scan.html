{% extends "base.html" %}
{% block content %}
<div class="container">
	<h1>Create a new scan!</h1>
	<form class="border rounded">
		<div class="form-group row">
			<label for="scan_name" class="col-sm-2 col-form-label" >Scan Name</label>
			<input class="col-sm-6 form-control" type="text" id="scan_name" value="{{defaults["scan_name"]}}">
		</div>
		<div class="form-group row">
			<label for="scan_time" class="col-sm-2 col-form-label">Scan Time</label>
			<input class="col-sm-6 form-control" type="number" id="scan_time" value="{{defaults["scan_time"]}}">
		</div>
		<div class="row">
			{% for proto,band in protocols %}
			{% if "Wifi" in proto %}
			{% set freqs = all_wifi_freqs[band] %}
			{% else %}
			{% set freqs = default_other_freqs[proto].items() %}
			{% endif %}
			<div class="form-group col-sm-2">
				{{ defaults[proto] }}
				<label for="{{proto|lower}}_select_{{band}}">{{proto+" "+band}}Ghz</label>
				<select multiple class="form-control" id="{{proto|lower}}_select_{{band}}">
				{% for freq in freqs %}
				{% set is_default = freq[0]|int in defaults[proto+band] %}
					{{is_default}}
					<option value="{{freq[1]}}" 
					{% if is_default %} selected="selected" {% endif %}>
					{{freq[0]}}
					</option>
				{% endfor %}
				</select>
			</div>
			{% endfor %}
		</div>
		<button class="btn btn-lg btn-primary">Run scan</button>
	</form>
</div>
{% endblock %}
